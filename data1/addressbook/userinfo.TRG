TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER `aaa` AFTER INSERT ON `userinfo` FOR EACH ROW BEGIN\nINSERT into Log(body) VALUES (concat(\'userinfo新增\',new.uid,\'一條紀錄\'));\nend' 'CREATE DEFINER=`root`@`localhost` TRIGGER `update_user_pwd3` BEFORE UPDATE ON `userinfo`\n FOR EACH ROW BEGIN\n\n        IF @count IS NULL THEN\n    SET\n        @count = 1 ; ELSE\n    SET\n        @count = @count + 1 ;\n    END IF ;\n    if (@count > 1) and (old.pwd <> new.pwd)  THEN\n    SIGNAL SQLSTATE \'45001\' set MESSAGE_TEXT = \'請勿一次修改兩筆資料\';\n    end if;\n   \n    -- INSERT INTO log(body) VALUES(concat(\'將\',new.uid,\'update!\'));\n    \nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER update_pwd2 BEFORE UPDATE on userinfo for each row\nBEGIN\n        IF @count IS NULL THEN\n    SET\n        @count = 1; ELSE\n    SET\n        @count = @count + 1;\n    END IF; \n    \n    IF(@count > 1) AND(\n        (old.pwd IS NULL AND NEW.pwd IS NOT NULL) \n        OR(old.pwd IS NOT NULL AND NEW.pwd IS NULL) \n        OR(old.pwd IS NOT NULL AND NEW.pwd IS not null AND old.pwd <> NEW.pwd)\n    ) \n    THEN \n    SIGNAL SQLSTATE \'45001\'\nSET MESSAGE_TEXT\n    = \'請勿一次修改兩筆密碼\';\nEND IF;\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `update_user2` AFTER UPDATE ON `userinfo` FOR EACH ROW BEGIN\nINSERT INTO log(body) VALUES(concat(\'將\',new.uid,\' \' ,ifnull(old.cname,\'null\'),\'=>\',ifnull(new.cname,\'null\'),\'update!\'));\nend' 'CREATE DEFINER=`root`@`localhost` TRIGGER listenDelete after DELETE on userinfo for each ROW\nBEGIN\nINSERT INTO log(body) VALUES(concat(\'將\',old.uid,\'delete!\'));\nend' 'CREATE DEFINER=`root`@`localhost` TRIGGER listenDelete1 after DELETE on userinfo for each ROW\nBEGIN\nINSERT INTO log(body) VALUES(concat(\'將\',old.uid,\'delete!\'));\nend' 'CREATE DEFINER=`root`@`localhost` TRIGGER del_user after DELETE on userinfo for each ROW\nBEGIN\nINSERT INTO log(body) VALUES(concat(\'將\',old.uid,\'delete!\'));\nend' 'CREATE DEFINER=`root`@`localhost` TRIGGER del_user1 after DELETE on userinfo for each ROW\nBEGIN\nINSERT INTO log(body) VALUES(concat(\'將\',old.uid,\'delete!\'));\nend' 'CREATE DEFINER=`root`@`localhost` TRIGGER del_user2 after DELETE on userinfo for each ROW\nBEGIN\nINSERT INTO log(body) VALUES(concat(\'將\',old.uid,\'delete!\'));\nend'
sql_modes=1098907648 1098907648 1098907648 1098907648 1098907648 1098907648 1098907648 1098907648 1098907648
definers='root@localhost' 'root@localhost' 'root@localhost' 'root@localhost' 'root@localhost' 'root@localhost' 'root@localhost' 'root@localhost' 'root@localhost'
client_cs_names='utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4'
connection_cl_names='utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci'
db_cl_names='utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci'
created=1686039246748267 1686104938291329 1686105363962370 1686104719603964 1686039451119001 1686039519061208 1686039655244234 1686039723096038 1686039775319491
